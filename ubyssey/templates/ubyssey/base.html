{% load static %}
{% load wagtailuserbar %}
{% load dispatch_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
	
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" type="text/javascript"></script>
	<script src="https://kit.fontawesome.com/36b5fcae87.js" crossorigin="anonymous"></script>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="utf-8" />
	<meta name="viewport"
		content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

	{% include 'ubyssey/meta_tags.html' %}

	{% block stylesheet %}
	<link rel="stylesheet" href="{% static 'ubyssey/css/main.css' %}" type="text/css" />
	{% endblock %}

	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3D8SDLCGE"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-M3D8SDLCGE');
	</script>

	{% comment %}
	Below script (seemingly) generated by Google Ad Manager
	{% endcomment %}
	<script>
		var googletag = googletag || {}; // Checks if googletag object exists. Creates new object otherwise
		googletag.cmd = googletag.cmd || []; // ditto above for googletag.cmd
		(function () {
			// define anonymous function to be invoked immediately

			// This function creates a <script> element, which will be added to the HTML document
			// First we create a new object that describes our new object
			var gads = document.createElement('script');

			// define the attributes for our new element. It is "async" and has "type = text/javascript"
			gads.async = true;
			gads.type = 'text/javascript';

			// Check if we're using SSL, then add the appropriate 'src' attribute
			var useSSL = 'https:' == document.location.protocol;
			gads.src = (useSSL ? 'https:' : 'http:') +
				'//securepubads.g.doubleclick.net/tag/js/gpt.js';

			// Looks for "script" elements in the existing HTML document.
			// Inserts this new element we've described before the first of such elements
			// The new script element will take precedence 
			var node = document.getElementsByTagName('script')[0];
			node.parentNode.insertBefore(gads, node);
		})(); // invoke the function
	</script>
	{% comment %} Below script generated by Mailchimp Integrations. It enables Mailchimp popup functionality
	{% endcomment %}
	<script id="mcjs">
		! function (c, h, i, m, p) {
			m = c.createElement(h), p = c.getElementsByTagName(h)[0], m.async = 1, m.src = i, p.parentNode.insertBefore(m, p)
		}(document, "script",
			"https://chimpstatic.com/mcjs-connected/js/users/ae9a0995cf91e8c746ab242fe/2ccb930b505d0513a70955a38.js");
	</script>
	{% block head_scripts %}
	{% endblock %}
</head>

<body>
	<script>
		if (window.devicePixelRatio && devicePixelRatio >= 2) {
			var testElem = document.createElement('div');
			testElem.style.border = '.5px solid transparent';
			document.body.appendChild(testElem);
			if (testElem.offsetHeight == 1) {
				document.querySelector('html').classList.add('hairlines');
			}
			document.body.removeChild(testElem);
		}
	</script>
	<script>
		window.fbRefresh = function () {};
		window.fbAsyncInit = function () {
			FB.init({
				appId: '910205815715611',
				xfbml: true,
				version: 'v2.8'
			});
			window.fbRefresh = FB.XFBML.parse;
		};

		(function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) {
				return;
			}
			js = d.createElement(s);
			js.id = id;
			js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8';
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
	</script>
	<script>
		window.twttrRefresh = function () {};
		window.twttr = (function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0],
				t = window.twttr || {};
			if (d.getElementById(id)) return t;
			js = d.createElement(s);
			js.id = id;
			js.src = 'https://platform.twitter.com/widgets.js';
			fjs.parentNode.insertBefore(js, fjs);

			t._e = [];
			t.ready = function (f) {
				t._e.push(f);
			};

			t.ready(function () {
				window.twttrRefresh = function () {
					window.twttr.widgets.on('load', function () {});
				};
			});

			return t;
		}(document, 'script', 'twitter-wjs'));
	</script>

	<div id="container page-wrapper">
		<div id="cookie-disclaimer">
		</div>
		<div class="adblock-splash inactive" onload="adBlockerDetector()">
			<div class='adblock-container'>
				  
			  <div class="alert-symbols-buttons">
				<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" class="alert-symbol" fill="none">
				  <g clip-path="url(#clip0_1_3)">
					<rect width="80" height="80" fill="white"/>
					<path d="M40 75C30.7174 75 21.815 71.3125 15.2513 64.7487C8.68749 58.185 5 49.2826 5 40C5 30.7174 8.68749 21.815 15.2513 15.2513C21.815 8.68749 30.7174 5 40 5C49.2826 5 58.185 8.68749 64.7487 15.2513C71.3125 21.815 75 30.7174 75 40C75 49.2826 71.3125 58.185 64.7487 64.7487C58.185 71.3125 49.2826 75 40 75ZM40 80C50.6087 80 60.7828 75.7857 68.2843 68.2843C75.7857 60.7828 80 50.6087 80 40C80 29.3913 75.7857 19.2172 68.2843 11.7157C60.7828 4.21427 50.6087 0 40 0C29.3913 0 19.2172 4.21427 11.7157 11.7157C4.21427 19.2172 0 29.3913 0 40C0 50.6087 4.21427 60.7828 11.7157 68.2843C19.2172 75.7857 29.3913 80 40 80Z" fill="#0071C9"/>
					<path d="M35.01 55C35.01 54.3434 35.1393 53.6932 35.3906 53.0866C35.6419 52.48 36.0102 51.9288 36.4745 51.4645C36.9388 51.0002 37.49 50.6319 38.0966 50.3806C38.7032 50.1293 39.3534 50 40.01 50C40.6666 50 41.3168 50.1293 41.9234 50.3806C42.53 50.6319 43.0812 51.0002 43.5455 51.4645C44.0098 51.9288 44.3781 52.48 44.6294 53.0866C44.8807 53.6932 45.01 54.3434 45.01 55C45.01 56.3261 44.4832 57.5979 43.5455 58.5355C42.6079 59.4732 41.3361 60 40.01 60C38.6839 60 37.4122 59.4732 36.4745 58.5355C35.5368 57.5979 35.01 56.3261 35.01 55ZM35.5 24.975C35.4334 24.3442 35.5002 23.7065 35.696 23.1031C35.8918 22.4998 36.2123 21.9444 36.6366 21.4729C37.0609 21.0015 37.5796 20.6245 38.1591 20.3664C38.7385 20.1084 39.3657 19.975 40 19.975C40.6343 19.975 41.2615 20.1084 41.8409 20.3664C42.4204 20.6245 42.9391 21.0015 43.3634 21.4729C43.7877 21.9444 44.1082 22.4998 44.304 23.1031C44.4998 23.7065 44.5666 24.3442 44.5 24.975L42.75 42.51C42.6912 43.1989 42.376 43.8406 41.8668 44.3082C41.3576 44.7758 40.6914 45.0353 40 45.0353C39.3086 45.0353 38.6425 44.7758 38.1332 44.3082C37.624 43.8406 37.3088 43.1989 37.25 42.51L35.5 24.975Z" fill="#0071C9"/>
				  </g>
				  <defs>
					<clipPath id="clip0_1_3">
					<rect width="80" height="80" fill="white"/>
					</clipPath>
				  </defs>
				</svg>
			  </div>
			  
			  <div className='adblock-content'>
				<h1 class="adblock-title">Enjoying the Ubyssey?</h1>
				<div class="adblock-info" style="width: 100%; text-align: center">
				  <span class="adblock-info">Ads help <span class="adblock-info-the_ubyssey">The Ubyssey </span>bring you <span class="adblock-info-bold">quality content </span>and <span class="adblock-info-bold">tell stories that matter</span>.
					<br/><br/>
					Please <span class="adblock-info-bold">disable </span> adblock or <span class="adblock-info-bold">whitelist </span>ubyssey.ca
					<br/><br/>
					<span class="adblock-info-blue-bold">Please support our student newspaper.</span>
				  </span>
				</div>
			  </div>
		  
			  <div class="alert-symbols-buttons">
				<button class='adblock-button'>
				  Thank You!
				</button>
			  </div>
			  
			</div>
		  </div>
		{% block header %}
		{% endblock %}
		<div id="search-form">
		</div>
		<div id="content-wrapper">

			{% block pre_main_content %}
			{% endblock %}

			{% block content %}
			{% endblock %}

			{% block footer %}
			{% include 'navigation/footer.html' %}
			{% endblock %}
		</div>
	</div>

	<script src="{% static 'ubyssey/js/ads.js' %}" type="text/javascript" ></script>
	
	<script type="text/javascript">
		(function () {
			function adBlockDetected(pageWrapper) {
				pageWrapper.classList.add("adblock-background");
				adBlock.classList.remove("inactive"); 
				adBlock.classList.add("active");
			}

			var adBlock = document.querySelectorAll(".adblock-splash")[0];
			var pageWrapper = document.querySelectorAll("#content-wrapper")[0];

			if(window.adsAreWithUs === undefined){
				// adblocker detected, show fallback
				adBlockDetected(pageWrapper);
			}
			
			var closeAdBlock = document.querySelectorAll(".adblock-button")[0];
			closeAdBlock.addEventListener("click", function () {
				if (document.querySelector(".active") != undefined) {
					adBlock.classList.remove("active");
				}

				pageWrapper.classList.remove("adblock-background");
				adBlock.classList.add("inactive");
				
			});
			})(document, 'script', 'adBlockerDetector');
	</script>
	{% comment %}
	Warning: The below script is undocumented, but errors are thrown when using a Full-Width style article if it is
	deleted.
	TODO: figure out what it is, and document it
	{% endcomment %}
	<script type="text/javascript">
		(function (e, a) {
			if (!a.__SV) {
				var b = window;
				try {
					var c, l, i, j = b.location,
						g = j.hash;
					c = function (a, b) {
						return (l = a.match(RegExp(b + "=([^&]*)"))) ? l[1] : null
					};
					g && c(g, "state") && (i = JSON.parse(decodeURIComponent(c(g, "state"))), "mpeditor" === i.action && (
						b.sessionStorage.setItem("_mpcehash", g), history.replaceState(i.desiredHash || "", e
							.title, j.pathname + j.search)))
				} catch (m) {}
				var k, h;
				window.mixpanel = a;
				a._i = [];
				a.init = function (b, c, f) {
					function e(b, a) {
						var c = a.split(".");
						2 == c.length && (b = b[c[0]], a = c[1]);
						b[a] = function () {
							b.push([a].concat(Array.prototype.slice.call(arguments,
								0)))
						}
					}
					var d = a;
					"undefined" !== typeof f ? d = a[f] = [] : f = "mixpanel";
					d.people = d.people || [];
					d.toString = function (b) {
						var a = "mixpanel";
						"mixpanel" !== f && (a += "." + f);
						b || (a += " (stub)");
						return a
					};
					d.people.toString = function () {
						return d.toString(1) + ".people (stub)"
					};
					k = "disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user"
						.split(" ");
					for (h = 0; h < k.length; h++) e(d, k[h]);
					a._i.push([b, c, f])
				};
				a.__SV = 1.2;
				b = e.createElement("script");
				b.type = "text/javascript";
				b.async = !0;
				b.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === e.location
					.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ?
					"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" :
					"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";
				c = e.getElementsByTagName("script")[0];
				c.parentNode.insertBefore(b, c)
			}
		})(document, window.mixpanel || []);
		mixpanel.init("4941b226d03a988d5f2bc8fea8e0e70d");
	</script>

	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" href="//cdn.jsdelivr.net/jquery.mcustomscrollbar/3.1.5/jquery.mCustomScrollbar.min.css" />
	<script src="//cdn.jsdelivr.net/jquery.mcustomscrollbar/3.1.5/jquery.mCustomScrollbar.concat.min.js"
		type="text/javascript"></script>
	<script src="{% static 'ubyssey/js/vendors.js' %}" type="text/javascript"></script>
	<script src="{% static 'ubyssey/js/main.js' %}" type="text/javascript"></script>
	{% block scripts %}
	<script src="{% static 'ubyssey/js/article.js' %}" type="text/javascript"></script>
	{% endblock %}
	{% wagtailuserbar %}
</body>

</html>