{% extends 'ubyssey/base.html' %}
{% load static %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load video_filters %}
{% load ubyssey_ad_filters %}
{% load ubyssey_ad_tags %}

{% block head_scripts %}
    <!-- Register ads for article page -->
    {% for orderable in settings.ads.AdTagSettings.article_head_tags.all %}
        {% gpt_define_tag orderable.ad_slot %}
    {% endfor %}
{% endblock %}

{% block header %}
    {% include 'navigation/headers/topbar.html' %}
    {% include 'navigation/headers/mobile.html' %}
{% endblock %}

{% block content %}
    <main id="article-{{ self.slug }}" class="article">
        {% block banner_ad %}
        <!-- Article Page header ads go here -->
            {% for orderable in settings.ads.AdTagSettings.article_header_placements.all %}
                {% gpt_placement_tag orderable.ad_slot %}
            {% endfor %}
        {% endblock %}

        <article class="c-article {% if timeline %}c-article--timeline {% endif %}js-article {% block specific_article_class %}{% comment %} This block is used to override styling for the main article body (as in e.g. a full width banner article) {% endcomment %}c-article--default {% endblock %}"> <!--article-->
            <!-- Below is the Article heading, including Article headline and bylines -->
            {% block banner %}
                <div class="u-container">
                    {% comment %} {% if breaking %}
                        <a class="o-breaking-news" href="{{ breaking.get_absolute_url }}">
                            <h3>BREAKING: {{ breaking.headline|safe }}</h3>
                        </a>        
                    {% endif %} {% endcomment %}
                </div>
                <script>
                    /* Restoring browsering effects */
*{
    margin:0;
    padding: 0;
    box-sizing: border-box;
}
  
body{
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #000;
}
  
.main_box{
    width: 4em;
    height: 4em;
    position: relative;
}
  
#share_button{
    display: none;
}
  
span,a{
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
}
  
span{
    width: 4em;
    height: 4em;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    background-color: #eee;
    color: #333;
    font-size: 2em;
    z-index: 1;
    cursor: pointer;
    /* border-radius: 30%; */
}
  
.sm_list{
    width: 4em;
    height: 4em;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
}
  
.sm_list a{
    width: 4em;
    height: 4em;
    border-radius: 50%;
    text-decoration: none;
    color: #fff;
    transition: all .3s;
    font-size: 1.5em;
}
  
#share_button:checked ~ .sm_list a:nth-child(1){
    background-color: #3B5998;
    transition-delay: 0.2s;
    transform: translateX(-6em);
}
  
#share_button:checked ~ .sm_list a:nth-child(2){
    background-color: #dd2553;
    transition-delay: 0.2s;
    transform: translateX(6em);
}
  
#share_button:checked ~ .sm_list a:nth-child(3){
    background-color: #000f94;
    transition-delay: 0.3s;
    transform: translateX(12em);
}
  
#share_button:checked ~ .sm_list a:nth-child(4){
    background-color: #1077ec;
    transition-delay: 0.3s;
    transform: translateX(-12em);
}
  
#share_button:checked ~ .sm_list a:nth-child(5){
    background-color: rgb(10, 63, 0);
    transition-delay: 0.4s;
    transform: translateX(18em);
}
  
#share_button:checked ~ .sm_list a:nth-child(6){
    background: linear-gradient(70deg,blue,green,red,yellow);
    transition-delay: 0.4s;
    transform: translateX(-18em);
}
  
/* Hovering Effects */
#share_button:checked ~ .sm_list a:nth-child(1):hover{
    background-color: #ffffff;
    color: #3B5998;
    /* transition-delay: 0.2s;
    transform: translateX(-6em); */
}
  
#share_button:checked ~ .sm_list a:nth-child(2):hover{
    color: #dd2553;
    background-color: #fff;
}
  
#share_button:checked ~ .sm_list a:nth-child(3):hover{
    color: #000f94;
    background-color: #fff;
}
  
#share_button:checked ~ .sm_list a:nth-child(4):hover{
    color: #1077ec;
    background-color: #fff;
}
  
#share_button:checked ~ .sm_list a:nth-child(5):hover{
    color: rgb(10, 63, 0);
    background-color: #fff;
}
  
#share_button:checked ~ .sm_list a:nth-child(6):hover{
    color: black;
    background-image: linear-gradient(90deg,white,grey);
}
  
span:visited{
    background-color: #000f94;
}
                </script>
                <script src="{% static 'ubyssey/js/sharebuttons.js' %}" type="text/javascript"></script>
                <div class="main_box">
                    <input type="checkbox" id="share_button">
                    <label for="share_button">
                        <span class="sharebtn" >
                          <i class="far fa-share-square"></i>
                        </span>
                    </label>
              
                    <div class="sm_list">
                        <a href="#" class="facebook">
                          <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="instagram">
                          <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="linkedin">
                          <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="#" class="discord">
                          <i class="fab fa-discord"></i>
                        </a>
                        <a href="#" class="whatsapp">
                          <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="#" class="slack">
                          <i class="fab fa-slack"></i>
                        </a>
                    </div>
                </div>
                <div class="u-container u-container--content u-container--padded">
                    <h1 class="o-headline o-headline--article">{{ self.title|safe }}</h1>
                    <div class="c-article__info">
                        <div class="c-article__byline">
                            <div class="c-article__author">
                                {{ self.authors_with_roles|safe }}
                            </div>
                            <div class="c-article__byline__meta">
                                <span class="c-article__published-at">{{ self.published_at|date:'N j, Y' }}</span>
                                {% comment %}                                     
                                    {% if reading_time %}
                                        <span> &nbsp;&middot;&nbsp; </span>
                                        <span class="c-article__reading-time">{{ reading_time }} min read</span>
                                    {% endif %}
                                {% endcomment %}
                                {% comment %}
                                    {% if article.subsection  %}
                                        <span> &nbsp;&middot;&nbsp; </span>
                                        <a href="{{ article.subsection.get_absolute_url }}">
                                            <span class="c-article__reading-time">{{ article.subsection.name }}</span>
                                        </a>
                                    {% endif %}
                                {% endcomment %}
                            </div>
                        </div>
                        {% comment %}
                            {% include 'objects/social-icons.html' with article=article layout='top' %}
                        {% endcomment %}
                    </div>
                </div>
            {% endblock %}
            <!-- Below is the container for Article content -->
            <div class="u-container clearfix {% block right_column_class %}{% comment %} This block is used to override the styling of the right column (as in e.g. a full width banner article){% endcomment %}{% endblock %}">
                <!-- Below is the container for the left column article content  -->
                <div class="cell left article-content">
                    {% block pre-content %}
                    {% endblock %}
                    {% if not self.is_explicit %}
                        {% filter inject_ads:is_mobile %}
                            <!-- Content unique to the article starts here -->
                            <!-- Article featured media -->
                            {% if self.layout == 'default' %}
                                {% if self.featured_media.first.image %}
                                    {% with self.featured_media.first as featured_image_object %}
                                        <div class="featured-media">
                                            {% image featured_image_object.image original as original_image %}
                                            {% image featured_image_object.image width-500 as featured_image %}
                                            <img class="article-attachment" 
                                                data-id="{{ featured_image_object.id }}"
                                                data-caption="{% if featured_image_object.caption %}{{ featured_image_object.caption }}{% endif %}"
                                                data-credit="{% if featured_image_object.credit %}{{ featured_image_object.credit }}{% endif %}"
                                                {% comment %}
                                                    Differences between line data-url and arc attributes represent the difference between
                                                    the obselete Dispatch equivalent of the URL for the "original image" ("data-url" attribute)
                                                    the "rendition" ("src" attribute). "data-url" is included for backward compatibility,
                                                    but "src" secures the primary functionality of this img element.
                                                {% endcomment %}
                                                data-url="{{ original_image.url }}"
                                                src="{{ featured_image.url }}"
                                                alt=""
                                            />
                                            {% if featured_image_object.caption or featured_image_object.credit %}
                                                <div class="caption">
                                                    {% if featured_image_object.caption %}
                                                        {{ featured_image_object.caption }}
                                                    {% endif %}
                                                    {% if featured_image_object.credit %}
                                                        <span class="credit">
                                                            {{ featured_image_object.credit }}
                                                        </span>
                                                    {% endif %}
                                                </div>
                                            {% endif %}
                                        </div>
                                    {% endwith %}
                                {% elif self.featured_media.first.video %}
                                    {% with self.featured_media.first as featured_video_object %}
                                        <div class="featured-media">
                                            <iframe 
                                                width="500px" 
                                                height="281px" 
                                                allowfullscreen="allowfullscreen"
                                                mozallowfullscreen="mozallowfullscreen" 
                                                msallowfullscreen="msallowfullscreen" 
                                                oallowfullscreen="oallowfullscreen" 
                                                webkitallowfullscreen="webkitallowfullscreen"
                                                src="{{ featured_video_object.video.url|youtube_embed_url|safe }}">
                                            </iframe>
                                            {% if featured_video_object.caption or featured_video_object.credit %}
                                                <div class="caption">
                                                    {% if featured_video_object.caption %}{{ featured_video_object.caption }}{% endif %} {% if featured_video_object.credit %}<span class="credit">{{ featured_video_object.credit }}</span>{% endif %}
                                                </div>
                                            {% endif %}
                                        </div>
                                    {% endwith %}
                                {% endif %}
                            {% endif %}
                            <!-- Article text -->
                            {% for block in self.content %}
                                {% include_block block %}
                            {% endfor %}
                            <!-- Content unique to the article ends here -->
                        {% endfilter %}
                    {% else %}
                        <!-- Content unique to the article starts here -->
                        {% for block in self.content %}
                            {% include_block block %}
                        {% endfor %}
                        <!-- Content unique to the article ends here -->
                    {% endif %}
                    {% block post-content %}
                    {% endblock %}
                </div>
                <!-- Below is the container for the right column article content, not entirely unique to the article -->
                <aside class="cell right sidebar">
                    {% block sidebar %}
                        <!-- Article Page sidebar ads go here -->
                        {% if self.is_explicit is not True %}
                            {% for orderable in settings.ads.AdTagSettings.article_sidebar_placements.all %}
                                {% gpt_placement_tag orderable.ad_slot %}
                            {% endfor %}            
                        {% else %}
                            {% comment %} {% include 'objects/replacement.html' with size='box' %} {% endcomment %}
                        {% endif %}
                        {% comment %} Suggested articles in same Section up to 6 articles that are not itself {% endcomment %}
                        <div class="suggested-articles">
                            {% for article in suggested_articles %}
                                {% if article.slug != self.slug %} 
                                    {% include 'article/objects/suggested_articles_column.html' with article=article padded=True   %}
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endblock %}
                </aside>                        


            {% comment %} {% include 'objects/social-icons-bottom.html' with article=article %} {% endcomment %}
        </article>
    </main>


    {% comment %} Former location of suggested/trending articles. Do not re-implement until a design contract exists {% endcomment %}
    {% comment %} <div class='bottom-banner-wrapper'>
    <div class='bottom-banner-container'>
    </div>
    </div> {% endcomment %}

{% endblock %}

<!-- Article-specific scripts -->
{% block scripts %}
    {% for script_obj in self.scripts.all %}
        <script src="{{ script_obj.script.file.url }}" type="text/javascript"></script>
    {% endfor %}
{% endblock %}