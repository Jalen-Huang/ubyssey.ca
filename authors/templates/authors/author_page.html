{% extends 'ubyssey/base.html' %}
{% load static %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load authors_tags %}

{% block content %}

{% block header %}
{% include 'navigation/headers/topbar.html' %}
{% include 'navigation/headers/mobile.html' %}
{% endblock %}

<style>
	.author-header {
		position: relative;
		margin: auto;
		margin-bottom: 70px;
	}
	.author-img {
		width: 350px;
	    height: 350px;
    	border-radius: 100%;
		background-size: cover;
	}
	.author-info {
		background-color: #C0E3F1;
		border-radius: 25px;
		padding: 2%;
		box-shadow: #0000003b -25px 25px 2px;
		position: absolute;
		left: 300px;
		height: fit-content;
		transform: translate(0, -60%);
		top: 50%;
	}
	.author-name {
		text-decoration: underline;
		font-size: 3rem;
		line-height: 1rem;
	}
	.author-role {
		font-size: 1.2rem;
		line-height: 2rem;
	}
	.author-desc {
		color: #031621;
	    line-height: 1.45em;
	}
	.author-links {
		margin-bottom: 0;
	}
	.author-pinned_list {
		display: flex;
		justify-content: space-between;
		margin-bottom: 40px;
		margin-top: 25px;
	}
	.author-pinned_article {
		width: 31%;
	}
	.author-heading {
		font-size: 1.2rem;
	}
	.options {
		display: flex;
		justify-content: space-between;
		width: 225px;
	}
	.selected {
		text-decoration: underline;
	}
</style>

<main class="c-page c-page--author">
	<div class="u-container">

		<div class="author-header">
			{% if self.image %}
			<div>
				{% image self.image width-350 as pfp %}
				<div class="author-img" style="background-image: url('{{pfp.full_url}}')"></div>
			</div>
			{% endif %}
			<div class="author-info">
				<h1 class="author-name">{{ self.title }}</h1>
				<h2 class="author-role"> {{self.ubyssey_role}} </h2>
				{% if self.description %}<p class="author-desc">{{ self.description|safe }}</p>{% endif %}
				<p class="author-links">
					{% for icon in self.linkIcons %}
						{{icon}}
					{% endfor %}
				</p>
			</div>
		</div>

		{% if self.pinned_articles.count > 0 and current_page == 1 %}
			<h2 class="author-heading">Pinned by {{self.title}}</h2>
			<div class="author-pinned_list">
				{% for article in self.pinned_articles.all %}
					<div class="author-pinned_article">	
						{% include 'article/objects/author_pinned.html' with article=article.article %}
					</div>
				{% endfor %}
			</div>
		{% endif %}
		
		<div class="options">
			<h2 class="author-heading {% if media_type == "stories" %}selected{% endif %}"><a href="/authors/{{self.slug}}/stories">Stories</a></h2>
			<h2 class="author-heading {% if media_type == "photos" %}selected{% endif %}"><a href="/authors/{{self.slug}}/photos">Photos</a></h2>
			<h2 class="author-heading {% if media_type == "videos" %}selected{% endif %}"><a href="/authors/{{self.slug}}/videos">Videos</a></h2>
		</div>

		<h2 class="author-heading">Latest {{media_type}} from {{self.title}}</h2>
		
		{% if media_type == "stories" %}
			{% include 'archive/objects/archive.html' with page_obj=paginated_articles %}
		{% elif media_type == "photos" %}
			{% include 'archive/objects/gallery.html' with page_obj=paginated_articles %}
		{% elif media_type == "videos" %}
			{% include 'archive/objects/video_archive.html' with paginated_videos=paginated_articles %}
		{% endif %}
	</div>
</main>
{% endblock %}